#textdomain wesnoth-The_Legend_Begins

[scenario]
    id="53_Heart_of_Darkness"
    name= _ "Heart of Darkness"
    map_data="{~add-ons/The_Legend_Begins/maps/episode-3/53_Heart_of_Darkness.map}"

    next_scenario="53x_In_the_Dark_Capital"

    {TURNS 30 26 24}
    {TIME_OVER_DEFEAT}

    {SCHEDULE_MIDNIGHT}
    {DEFAULT_MUSIC_PLAYLIST}

    {~add-ons/The_Legend_Begins/macros/deaths.cfg}
    {~add-ons/The_Legend_Begins/macros/recurring-events.cfg}
    {~add-ons/The_Legend_Begins/macros/custom-advancement.cfg}

    [story]
        [part]
            music="underground.ogg"
            story= _ "The sight of their northern city collapsing on itself was more than enough to cause the enemy reinforcements to retreat."
        [/part]
        [part]
            story= _ "A few hours later, the trolls arrived under the command of Krog and the five leaders held a meeting to decide their next course of actions..."
        [/part]
        [part]
            background="portraits/jahin.png"
            scale_background=no
            story={CAPTION (_"Jahin")}+ _ "Friends, we have won a spectacular victory today... or tonight; I really can't tell due to this eternal darkness over this land. Anyways, should we return to our respective lands and focus on other matters such as the Chaos Empire? Or, should we continue attacking the legionaries?"
        [/part]
        [part]
            background="portraits/kojac.png"
            scale_background=no
            story={CAPTION (_ "Kojac")}+ _ "Return? Nonsense! My scouts tell me that the legion's capital is almost defenceless, as they had sent the majority of their army to their eastern city. We should attack them while we still have the chance."
        [/part]
        [part]
            background="portraits/drakes/transparent/enforcer.png"
            scale_background=no
            story={CAPTION (_ "Gashinar")}+ _ "I'm afraid that attacking them would be suicide. My drakes cannot fight well in this night realm. I would rather return and focus on the increasing Naga attacks on my borders."
        [/part]
        [part]
            background="portraits/fairuz.png"
            scale_background=no
            story={CAPTION (_"Fairuz")}+ _ "How about we just infiltrate the capital and assassinate their emperor? The legion would not be able to coordinate well, without its leader."
        [/part]
        [part]
            background="portraits/jahin.png"
            scale_background=no
            story={CAPTION (_"Jahin")}+ _ "Fairuz, are you out of your mind?! The capital is bound to be guarded by at least a thousand soldiers!"
        [/part]
        [part]
            background="portraits/fairuz.png"
            scale_background=no
            story={CAPTION (_"Fairuz")}+ _ "There is no harm in trying and who knows, perhaps, we can even succeed."
        [/part]
        [part]
            background="portraits/kojac.png"
            scale_background=no
            story={CAPTION (_"Kojac")}+ _ "My army will provide a distraction for you. We shall keep them busy whilst you two and a handful of my soldiers, enter the city and kill their leader. Lord Gashinar can return to his lands and send reinforcements to New Genesis."
        [/part]
        [part]
            background="portraits/drakes/transparent/enforcer.png"
            scale_background=no
            story={CAPTION (_ "Gashinar")}+ _ "As you wish. I shall send a quarter of my army to New Genesis. Farewell, Jahin, and best of luck."
        [/part]
        [part]
            background="portraits/krog.png"
            scale_background=no
            story={CAPTION (_"Krog")}+ _ "Krog and trolls accompany Jahin. We smash black soldiers!"
        [/part]
        [part]
            story= _ "In about two hours, Lord Gashinar and his drakes left, while Jahin and the orcish army began the march southwards. Having marched continuously for roughly three days alongside the coastline, Jahin and the rest reached a river's edge. Only the river separated them from the legion's capital..."
        [/part]
    [/story]

    [side]
        side=1
        team_name="good"
        user_team_name= _ "New Genesis"
        {FLAG_VARIANT loyalist}
        canrecruit=yes
        controller=human
        id="Jahin"
        name= _ "Jahin"
        type="Captain"
        {GOLD 300 250 200}
        {INCOME 2 1 0}
        recruit="Orcish Grunt,Orcish Archer,Orcish Assassin,Wolf Rider,Troll Whelp"

        [unit]
           id="Krog"
           placement=leader
           name= _ "Krog"
           profile="portraits/krog.png"
           unrenameable=yes
           type="Troll Warmonger"
           {IS_HERO}
           [modifications]
                {TRAIT_LOYAL}
                {TRAIT_STRONG}
           [/modifications]
        [/unit]
    [/side]

    {STARTING_VILLAGES 1 10}
    {AI_CONTROLLER () 1 5 ()}

    [side]
        side=2
        team_name="legion"
        user_team_name= _ "Dark Legion"
        {FLAG_VARIANT loyalist}
        canrecruit=yes
        controller=ai
        id="Marshal1"
        generate_name=yes
        type="Dark General"
        {GOLD 1000 1200 1500}
        {INCOME 78 78 78}
        recruit="Dark Soldier,Dark Longswordsman,Dark Warrior,Dark Fighter,Dark Champion,Dark Bowman,Dark Longbowman,Dark Crossbowman,Dark Arbalestier,Dark Heavy Longbowman,Dark Raider,Dark Pillager,Dark Knight,Dark Cavalier,Dark Spearman,Dark Halberdier,Dark Deathmaster,Dark Gunner,Dark Elite Gunner,Dark Trooper,Dark Crusher,Dark Guardian,Dark Terror"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.0}
            [target]
                id="Kojac"
                value=0
            [/target]
            [target]
                id="Lich1"
                value=100
            [/target]
            [target]
                id="Lich2"
                value=100
            [/target]
            [target]
                id="Lord Devan"
                value=800
            [/target]
            [target]
                id="Demon3"
                value=800
            [/target]
            [target]
                id="Demon2"
                value=800
            [/target]
        [/ai]
    [/side]

    {STARTING_VILLAGES 2 30}

    [side]
        side=3
        team_name="legion"
        user_team_name= _ "Nagas"
        {FLAG_VARIANT ragged}
        canrecruit=yes
        controller=ai
        id="Chief Blo"
        name= _ "Chief Blo"
        type="Naga Sentinel"
        {GOLD 1000 1200 1500}
        {INCOME 28 28 28}
        recruit="Nagini Mage,Naga Fighter,Naga Guardian,Naga Warden,Naga Hunter,Naga Marksman,Naga Warrior,Naga Myrmidon,Naga Sentinel"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.8}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            [target]
                id="Jahin"
                value=500
            [/target]
            [target]
                id="Lich1"
                value=800
            [/target]
            [target]
                id="Lich2"
                value=800
            [/target]
        [/ai]
    [/side]

    {STARTING_VILLAGES 3 10}

    [event]
        name="last breath"
        [filter]
            id="Chief Blo"
        [/filter]
        [message]
            speaker="Marshal2"
            message= _ "Useless excuse for a snake! I still don't understand why the emperor has your kind as allies."
        [/message]
    [/event]

    [side]
        side=4
        team_name="legion"
        user_team_name= _ "Dark Legion"
        id="Guard1"
        generate_name=yes
        type="Dark Warrior"
        canrecruit=yes
        controller=ai
        {FLAG_VARIANT loyalist}
        {GOLD 500 550 600}
        {INCOME 8 8 8}
        recruit="Dark Soldier,Dark Raider,Dark Bowman,Dark Spearman,Dark Longswordsman,Dark Crossbowman,Dark Longswordsman,Dark Fighter,Dark Halberdier"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            [target]
                side=1
                value=100
            [/target]
            [target]
                id="Jahin"
                value=500
            [/target]
        [/ai]
    [/side]

    {STARTING_VILLAGES 4 10}

    [side]
        side=5
        team_name="good"
        user_team_name= _ "Orcs"
        {FLAG_VARIANT ragged}
        id="Kojac"
        name= _ "High Chief Kojac"
        profile="portraits/kojac.png"
        type="Orcish Slurbow"
        canrecruit=yes
        controller=ai
        {GOLD 800 900 1000}
        {INCOME 68 68 68}
        recruit="Orcish Grunt,Orcish Archer,Wolf Rider,Orcish Assassin,Troll Whelp,Troll,Troll Rocklobber,Orcish Warrior,Orcish Crossbowman,Goblin Pillager,Direwolf Rider,Troll Warrior,Troll Boulderlobber,Orcish Warlord,Orcish Slurbow,Orcish Slayer,Orcish Nightblade"

        [ai]
           {AI_SIMPLE_ALWAYS_ASPECT grouping defensive}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,archer,scout"}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
           {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
           {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
           [target]
               side=9
               value=500
           [/target]
        [/ai]

        {LOYAL_UNIT 5 "Orcish Slurbow" 46 14}
        {LOYAL_UNIT 5 "Orcish Warlord" 46 14}
        {LOYAL_UNIT 5 "Orcish Slurbow" 46 14}
        {LOYAL_UNIT 5 "Orcish Nightblade" 46 14}
        {LOYAL_UNIT 5 "Orcish Warlord" 46 14}
        {LOYAL_UNIT 5 "Orcish Nightblade" 46 14}
        {LOYAL_UNIT 5 "Orcish Warlord" 46 14}

        {LOYAL_UNIT 5 "Troll Warrior" 48 17}
        {LOYAL_UNIT 5 "Troll Boulderlobber" 48 17}
        {LOYAL_UNIT 5 "Troll Warrior" 48 17}
        {LOYAL_UNIT 5 "Troll Boulderlobber" 48 17}
        {LOYAL_UNIT 5 "Troll Hero" 48 17}
        {LOYAL_UNIT 5 "Troll Shaman" 48 17}
        {LOYAL_UNIT 5 "Great Troll" 48 17}
        
    [/side]

    {STARTING_VILLAGES 5 15}

    [side]
        side=6
        team_name="evil"
        user_team_name= _ "Nightmares"
        {FLAG_VARIANT long}
        id="Lich1"
        generate_name=yes
        type="Lich"
        canrecruit=yes
        controller=ai
        {GOLD 1200 1500 1800}
        {INCOME 48 48 48}
        recruit="Angry One,Raging One,Reckless One,Rash One,Calamity,Inquisitor,Spiteful Watcher,Scornful Watcher,Life Thief,Death Spectre,Soul Snatcher,Cloud of Gloom,Eternal Night"

        [ai]
           {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,mixed fighter,fighter,mixed fighter"}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
           {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
           {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
           {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
           [target]
               id="Marshal1"
               value=500
           [/target]
           [target]
               id="Marshal2"
               value=500
           [/target]
           [target]
               id="Marshal3"
               value=500
           [/target]
           [target]
               id="Lord Devan"
               value=100
           [/target]
        [/ai]
    [/side]

    {STARTING_VILLAGES 6 7}

    [side]
        side=7
        team_name="evil"
        user_team_name= _ "Undead"
        {FLAG_VARIANT long}
        id="Lich2"
        generate_name=yes
        type="Lich"
        canrecruit=yes
        controller=ai
        {GOLD 1200 1500 1800}
        {INCOME 48 48 48}
        recruit="Skeleton,Skeleton Archer,Skeleton Rider,Bone Knight,Deathblade,Draug,Revenant,Bone Shooter,Banebow,Chocobone,Wraith,Spectre,Shadow,Nightgaunt,Death Knight"
 
        [ai]
           {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
           {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
           {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
           {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
           [target]
               id="Marshal1"
               value=500
           [/target]
           [target]
               id="Marshal2"
               value=500
           [/target]
           [target]
               id="Marshal3"
               value=500
           [/target]
           [target]
               id="Lord Devan"
               value=100
           [/target]
        [/ai]
    [/side]

    {STARTING_VILLAGES 7 7}

    [side]
        side=8
        team_name="chaos"
        user_team_name= _ "Chaos"
        {FLAG_VARIANT undead}
        id="Lord Devan"
        name= _ "Lord Devan"
        type="Demon Lord"
        canrecruit=yes
        controller=ai
        {GOLD 1200 1500 1800}
        {INCOME 98 98 98}

        recruit="Chaos Invader,Chaos Invoker,Chaos Raider,Chaos Gunner,Chaos Marksman,Chaos Sharpshooter,Chaos Knight,Chaos Razerman,Hell Overlord,Doom Guard,Hell Guardian,Demon,Demon Grunt,Demon Zephyr,Demon Warrior,Demon Spelldancer,Demon Stormtide,Valdemon Basher,Armageddon Imp,Wyvern Imp,Lumeril Guard"

        {GENERIC_UNIT 8 "Demon Warrior" 66 44}
        {GENERIC_UNIT 8 "Demon Warrior" 66 44}
        {GENERIC_UNIT 8 "Demon Warrior" 66 44}
        {GENERIC_UNIT 8 "Demon Warrior" 66 44}
        {GENERIC_UNIT 8 "Demon Warrior" 66 44}
        {GENERIC_UNIT 8 "Demon Warrior" 66 44}
        {GENERIC_UNIT 8 "Demon Warrior" 66 44}
        {GENERIC_UNIT 8 "Demon Warrior" 66 44}
        {GENERIC_UNIT 8 "Demon Warrior" 66 44}

        {GENERIC_UNIT 8 "Demon Stormtide" 70 55} 
        {GENERIC_UNIT 8 "Demon Stormtide" 70 55} 
        {GENERIC_UNIT 8 "Demon Stormtide" 70 55}
        {GENERIC_UNIT 8 "Demon Stormtide" 70 55} 
        {GENERIC_UNIT 8 "Demon Stormtide" 70 55} 
        {GENERIC_UNIT 8 "Demon Stormtide" 70 55} 
        {GENERIC_UNIT 8 "Demon Stormtide" 70 55} 
        {GENERIC_UNIT 8 "Demon Stormtide" 70 55} 

        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            [target]
                id="Marshal1"
                value=800
            [/target]
            [target]
                id="Marshal2"
                value=100
            [/target]
            [target]
                id="Marshal3"
                value=100
            [/target]
            [target]
                id="Marshal4"
                value=200
            [/target]
            [target]
                id="Marshal5"
                value=200
            [/target]
            [target]
                id="Kojac"
                value=0
            [/target]
            [target]
                id="Lich1"
                value=100
            [/target]
            [target]
                id="Lich2"
                value=100
            [/target]
        [/ai]
    [/side]

    {STARTING_VILLAGES 8 20}

    [side]
        side=9
        team_name="chaos"
        user_team_name= _ "Chaos"
        id="Demon1"
        type="Demon Slashing Gale"
        generate_name=yes
        {FLAG_VARIANT undead}
        canrecruit=yes
        controller=ai
        {GOLD 800 900 1000}
        {INCOME 38 38 38}
        recruit="Demon,Demon Grunt,Demon Zephyr,Demon Spelldancer,Demon Stormtide,Wyvern Imp,Valdemon Basher,Ixthala Fire Dancer,Gutwrencher Imp"
        
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            [target]
                id="Marshal1"
                value=100
            [/target]
            [target]
                id="Marshal2"
                value=100
            [/target]
            [target]
                id="Marshal3"
                value=50
            [/target]
            [target]
                id="Marshal4"
                value=500
            [/target]
            [target]
                id="Marshal5"
                value=500
            [/target]
            [target]
                id="Kojac"
                value=800
            [/target]
            [target]
                id="Lich1"
                value=0
            [/target]
            [target]
                id="Lich2"
                value=0
            [/target]
        [/ai]
    [/side]

    {STARTING_VILLAGES 9 10}

    [event]
        name="last breath"
        [filter]
            id="Demon1"
        [/filter]
        [message]
            speaker="Kojac"
            message= _ "Hurry, Jahin. I see a faction of the main Chaos army heading towards us."
        [/message]
        [message]
            speaker="Jahin"
            message= _ "Just hold them off a little longer, Kojac. Fairuz and I need more time."
        [/message]
    [/event]

    [side]
        side=10
        team_name="legion"
        color=pink
        user_team_name= _ "Dark Legion"
        {FLAG_VARIANT loyalist}
        canrecruit=yes
        x,y=23,56
        controller=ai
        id="Marshal2"
        generate_name=yes
        type="Dark General"
        {GOLD 1000 1200 1500}
        {INCOME 78 78 78}
        recruit="Dark Soldier,Dark Longswordsman,Dark Warrior,Dark Fighter,Dark Champion,Dark Bowman,Dark Longbowman,Dark Crossbowman,Dark Arbalestier,Dark Heavy Longbowman,Dark Raider,Dark Pillager,Dark Knight,Dark Cavalier,Dark Spearman,Dark Halberdier,Dark Deathmaster,Dark Gunner,Dark Elite Gunner,Dark Trooper,Dark Crusher,Dark Guardian,Dark Terror"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            [target]
                id="Kojac"
                value=0
            [/target]
            [target]
                id="Lich1"
                value=600
            [/target]
            [target]
                id="Lich2"
                value=600
            [/target]
            [target]
                id="Lord Devan"
                value=100
            [/target]
            [target]
                id="Demon3"
                value=100
            [/target]
            [target]
                id="Demon2"
                value=100
            [/target]
        [/ai]
    [/side]

    [side]
        side=11
        team_name="legion"
        color=pink
        user_team_name= _ "Dark Legion"
        {FLAG_VARIANT loyalist}
        canrecruit=yes
        x,y=13,53
        controller=ai
        id="Marshal3"
        generate_name=yes
        type="Dark General"
        {GOLD 1000 1200 1500}
        {INCOME 78 78 78}
        recruit="Dark Soldier,Dark Longswordsman,Dark Warrior,Dark Fighter,Dark Champion,Dark Bowman,Dark Longbowman,Dark Crossbowman,Dark Arbalestier,Dark Heavy Longbowman,Dark Raider,Dark Pillager,Dark Knight,Dark Cavalier,Dark Spearman,Dark Halberdier,Dark Deathmaster,Dark Gunner,Dark Elite Gunner,Dark Trooper,Dark Crusher,Dark Guardian,Dark Terror"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            [target]
                id="Kojac"
                value=0
            [/target]
            [target]
                id="Lich1"
                value=600
            [/target]
            [target]
                id="Lich2"
                value=600
            [/target]
            [target]
                id="Lord Devan"
                value=100
            [/target]
            [target]
                id="Demon3"
                value=100
            [/target]
            [target]
                id="Demon2"
                value=100
            [/target]
        [/ai]
    [/side]

    [side]
        side=12
        color=yellow
        team_name="legion"
        user_team_name= _ "Dark Legion"
        {FLAG_VARIANT loyalist}
        canrecruit=yes
        x,y=34,41
        controller=ai
        id="Marshal4"
        generate_name=yes
        type="Dark General"
        {GOLD 1000 1200 1500}
        {INCOME 78 78 78}
        recruit="Dark Soldier,Dark Longswordsman,Dark Warrior,Dark Fighter,Dark Champion,Dark Bowman,Dark Longbowman,Dark Crossbowman,Dark Arbalestier,Dark Heavy Longbowman,Dark Raider,Dark Pillager,Dark Knight,Dark Cavalier,Dark Spearman,Dark Halberdier,Dark Deathmaster,Dark Gunner,Dark Elite Gunner,Dark Trooper,Dark Crusher,Dark Guardian,Dark Terror"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            [target]
                id="Kojac"
                value=0
            [/target]
            [target]
                id="Lich1"
                value=100
            [/target]
            [target]
                id="Lich2"
                value=100
            [/target]
            [target]
                id="Lord Devan"
                value=800
            [/target]
            [target]
                id="Demon3"
                value=800
            [/target]
            [target]
                id="Demon2"
                value=800
            [/target]
        [/ai]
    [/side]

    [side]
        side=13
        team_name="legion"
        user_team_name= _ "Dark Legion"
        {FLAG_VARIANT loyalist}
        color=yellow
        x,y=31,32
        canrecruit=yes
        controller=ai
        id="Marshal5"
        generate_name=yes
        type="Dark General"
        {GOLD 1000 1200 1500}
        {INCOME 78 78 78}
        recruit="Dark Soldier,Dark Longswordsman,Dark Warrior,Dark Fighter,Dark Champion,Dark Bowman,Dark Longbowman,Dark Crossbowman,Dark Arbalestier,Dark Heavy Longbowman,Dark Raider,Dark Pillager,Dark Knight,Dark Cavalier,Dark Spearman,Dark Halberdier,Dark Deathmaster,Dark Gunner,Dark Elite Gunner,Dark Trooper,Dark Crusher,Dark Guardian,Dark Terror"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            [target]
                id="Kojac"
                value=0
            [/target]
            [target]
                id="Lich1"
                value=100
            [/target]
            [target]
                id="Lich2"
                value=100
            [/target]
            [target]
                id="Lord Devan"
                value=800
            [/target]
            [target]
                id="Demon3"
                value=800
            [/target]
            [target]
                id="Demon2"
                value=800
            [/target]
        [/ai]
    [/side]

    [side]
        side=14
        team_name="chaos"
        user_team_name= _ "Chaos"
        id="Demon2"
        color=cyan
        x,y=70,47
        type="Lumeril Glyph Mistress"
        generate_name=yes
        {FLAG_VARIANT undead}
        canrecruit=yes
        controller=ai
        {GOLD 800 900 1000}
        {INCOME 38 38 38}
        recruit="Demon,Demon Grunt,Demon Zephyr,Demon Spelldancer,Demon Stormtide,Wyvern Imp,Valdemon Basher,Ixthala Fire Dancer,Gutwrencher Imp,Demon Warrior,Lumeril Guard"
        
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            {AI_SIMPLE_ALWAYS_ASPECT passive_leader yes}
            [target]
                id="Marshal1"
                value=800
            [/target]
            [target]
                id="Marshal2"
                value=100
            [/target]
            [target]
                id="Marshal3"
                value=100
            [/target]
            [target]
                id="Marshal4"
                value=500
            [/target]
            [target]
                id="Marshal5"
                value=500
            [/target]
            [target]
                id="Kojac"
                value=0
            [/target]
            [target]
                id="Lich1"
                value=0
            [/target]
            [target]
                id="Lich2"
                value=0
            [/target]
        [/ai]
    [/side]

    [side]
        side=15
        team_name="chaos"
        user_team_name= _ "Chaos"
        id="Demon2"
        color=cyan
        x,y=76,43
        type="Hell Overlord"
        generate_name=yes
        {FLAG_VARIANT undead}
        canrecruit=yes
        controller=ai
        {GOLD 800 900 1000}
        {INCOME 38 38 38}
        recruit="Chaos Invader,Chaos Invoker,Chaos Gunner,Chaos Raider,Abomination,Chaos Knight,Chaos Marksman,Chaos Magus,Chaos Sharpshooter,Chaos Razerman,Doom Guard,Hell Guardian"
        
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_pattern "fighter,fighter,archer,scout,mixed fighter,archer"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT passive_leader yes}
            {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.2}
            [target]
                id="Marshal1"
                value=800
            [/target]
            [target]
                id="Marshal2"
                value=100
            [/target]
            [target]
                id="Marshal3"
                value=100
            [/target]
            [target]
                id="Marshal4"
                value=500
            [/target]
            [target]
                id="Marshal5"
                value=500
            [/target]
            [target]
                id="Kojac"
                value=0
            [/target]
            [target]
                id="Lich1"
                value=0
            [/target]
            [target]
                id="Lich2"
                value=0
            [/target]
        [/ai]
    [/side]

    [side]
        side=16
        team_name="legion"
        user_team_name= _ "Dark Legion"
        {FLAG_VARIANT loyalist}
        color=green
        hidden=yes
        gold=0
        income=-2
        no_leader=yes
        [ai] 
           {AI_SIMPLE_ALWAYS_ASPECT grouping defensive}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_movement "yes"}
           {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "yes"}
           {AI_SIMPLE_ALWAYS_ASPECT aggression 0.5}
           {AI_SIMPLE_ALWAYS_ASPECT leader_value 500}
           {AI_SIMPLE_ALWAYS_ASPECT caution 0.7}
           [protect_unit]
               side=2
               value=600
           [/protect_unit]
        [/ai]

        {GENERIC_UNIT 16 "Dark Champion" 31 57}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Warrior" 28 58}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Halberdier" 29 58}{GUARDIAN} 
        {GENERIC_UNIT 16 "Dark Terror" 26 59}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Cavalier" 24 60}{GUARDIAN}
        
        {GENERIC_UNIT 16 "Dark Elite Gunner" 23 61}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Deathmaster" 21 60}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Heavy Longbowman" 20 59}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Arbalestier" 31 56}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Champion" 30 56}{GUARDIAN}

        {GENERIC_UNIT 16 "Dark Champion" 26 58}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Warrior" 25 59}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Halberdier" 23 60}{GUARDIAN} 
        {GENERIC_UNIT 16 "Dark Terror" 28 57}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Cavalier" 17 60}{GUARDIAN}
        
        {GENERIC_UNIT 16 "Dark Elite Gunner" 14 59}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Deathmaster" 11 57}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Heavy Longbowman" 38 45}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Arbalestier" 39 45}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Champion" 40 44}{GUARDIAN}
       
        {GENERIC_UNIT 16 "Dark Champion" 39 42}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Warrior" 39 41}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Halberdier" 40 40}{GUARDIAN} 
        {GENERIC_UNIT 16 "Dark Terror" 40 38}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Cavalier" 39 38}{GUARDIAN}
        
        {GENERIC_UNIT 16 "Dark Elite Gunner" 38 36}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Deathmaster" 39 35}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Heavy Longbowman" 38 35}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Arbalestier" 38 34}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Champion" 38 32}{GUARDIAN}

        {GENERIC_UNIT 16 "Dark Champion" 38 31}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Warrior" 37 31}{GUARDIAN}
        {GENERIC_UNIT 16 "Dark Halberdier" 37 30}{GUARDIAN} 
        {GENERIC_UNIT 16 "Dark Terror" 36 29}{GUARDIAN}

        {GENERIC_UNIT 16 "Transport Galleon" 13 37}{GUARDIAN}
        {GENERIC_UNIT 16 "Transport Galleon" 8 37}{GUARDIAN}
        {GENERIC_UNIT 16 "Transport Galleon" 15 43}{GUARDIAN}
        {GENERIC_UNIT 16 "Transport Galleon" 22 40}{GUARDIAN}
        {GENERIC_UNIT 16 "Transport Galleon" 21 36}{GUARDIAN}
        {GENERIC_UNIT 16 "Transport Galleon" 19 38}{GUARDIAN}
        {GENERIC_UNIT 16 "Transport Galleon" 18 44}{GUARDIAN}
        {GENERIC_UNIT 16 "Transport Galleon" 22 42}{GUARDIAN}

    [/side]

    [event]
        name="prestart"
        
        [recall]
            id="Fairuz"
        [/recall]
        [recall]
            id="Kraag"
        [/recall]
        
        {VARIABLE side_4_leader_dead no}
        
        [item]
            x,y=29,24
            image="scenery/dwarven-doors-closed.png"
        [/item]
        [item]
            x,y=27,27
            image="scenery/dwarven-doors-closed.png"
        [/item]

        [objectives]
            [objective]
                description= _ "Move Jahin to the entrance of the tunnel. (29,24)"
                condition="win"
            [/objective]
            [objective]
                description= _ "Defeat the northern Legion commander (side 4 leader)."
                condition="win"
            [/objective]

            [objective]
                description= _ "Death of Jahin."
                condition="lose"
            [/objective]
            [objective]
                description= _ "Death of any hero unit."
                condition="lose"
            [/objective]
            [objective]
                description= _ "Death of Kojac."
                condition="lose"
            [/objective]
            {TURNS_RUN_OUT}

            [gold_carryover]
                carryover_percentage="80"
                bonus=yes
            [/gold_carryover]

            {AI_CONTROLLER_NOTE}
        [/objectives]
    [/event]

    [event]
        name="start"

        # Give the impression of observing city...
        
        {DELAY 670}
        [scroll_to_unit]
            id="Marshal1"
        [/scroll_to_unit]
        {DELAY 670}
        
        [scroll_to_unit]
            id="Marshal2"
        [/scroll_to_unit]
        {DELAY 670}

        [scroll_to_unit]
            id="Marshal3"
        [/scroll_to_unit]
        {DELAY 670}
        [scroll_to_unit]
            id="Marshal4"
        [/scroll_to_unit]
        {DELAY 670}
        [scroll_to_unit]
            id="Marshal4"
        [/scroll_to_unit]
        {DELAY 670}

        [scroll_to_unit]
            id="Jahin"
        [/scroll_to_unit]
        {DELAY 330}

        [message]
            speaker="Fairuz"
            message= _ "<i>(astounded)</i> This is the most beautiful city I have ever seen!"
        [/message]
        [message]
            speaker="Jahin"
            message= _ "A city of this magnitude makes New Genesis look like a medium-sized village!"
        [/message]
        
        [scroll_to_unit]
            id="Lord Devan"
        [/scroll_to_unit]
        {DELAY 330}
        
        [message]
            speaker="Lord Devan"
            message= _ "Surrender humans, and you shall be granted a swift end!"
        [/message]
        [message]
            speaker="Marshal1"
            message= _ "To hell with you, abomination! We shall defend the capital with our lives!"
        [/message]

        [scroll_to_unit]
            id="Kojac"
        [/scroll_to_unit]
        {DELAY 330}
        
        [message]
            speaker="Kojac"
            message= _ "It seems that a battle is about to begin here!"
        [/message]
        [message]
            speaker="Jahin"
            message= _ "Two of our enemies at the same place; fighting each other. The outcome of this can't be good."
        [/message]

        [scroll_to_unit]
            id="Lord Devan"
        [/scroll_to_unit]
        {DELAY 330}
         
        [message]
            speaker="Lord Devan"
            message= _ "Orcs? Here? No matter, we shall execute our objective as planned. Eliminate the orcs."
        [/message]
        [message]
            speaker="Demon1"
            message= _ "As you command, lord."
        [/message]
        [message]
            speaker="Kojac"
            message= _ "Bring it on, infernal mule! Orcs, bring me his head!"
        [/message]

        [scroll_to_unit]
            id="Lich1"
        [/scroll_to_unit]
        {DELAY 330}
        
        [message]
            speaker="Jahin"
            message= _ "Undead? What on Irdya are they doing here?"
        [/message]
        [message]
            speaker="Fairuz"
            message= _ "I don't know, and they won't get a chance to attack us. We are pretty far away from them."
        [/message]

        [scroll_to_unit]
            id="Kojac"
        [/scroll_to_unit]
        {DELAY 330}

        [message]
            speaker="Kojac"
            message= _ "Shouldn't you two be looking for a way to infiltrate the city?"
        [/message]
        
        {SCROLL_TO 29 24}
        {DELAY 670}
        {SCROLL_TO 27 27}
        {DELAY 330}

        [scroll_to_unit]
            id="Jahin"
        [/scroll_to_unit]
        {DELAY 330}
        
        [message]
            speaker="Jahin"
            message= _ "That tunnel is our answer! We shall use it to infiltrate the capital!"
        [/message]
        
        [scroll_to_unit]
            id="Guard1"
        [/scroll_to_unit]
        {DELAY 330}
        
        [message]
            speaker="Fairuz"
            message= _ "We have to take care of that regiment first."
        [/message]
        [message]
            speaker="Krog"
            message= _ "Krog and trolls ready to smash!"
        [/message]
        [message]
            speaker="narrator"
            image="wesnoth-icon.png"
            message= _ "You may recruit the strong and hardy <i>Troll Whelps</i>."
        [/message]
    [/event]

    [event]
        name="die"
        [filter]
            id="Guard1"
        [/filter]
        [message]
             speaker="Jahin"
             message= _ "The leader of this regiment is dead! Now, we must reach that tunnel!"
        [/message]

        {VARIABLE side_4_leader_dead yes}
    [/event]

    [event]
        name="moveto"
        first_time_only=no
        [filter]
           id="Jahin"
           x,y=29,24
        [/filter]
        [if]
           {VARIABLE_CONDITIONAL side_4_leader_dead equals yes}
           [then]
              [message]
                  speaker="Jahin"
                  message= _ "Kojac, keep the demons and imperialists at bay! We won't be long!"
              [/message]
              [message]
                  speaker="Kojac"
                  message= _ "Do not worry, Jahin. I shall not let these infernal pests conquer us!"
              [/message]
              {CLEAR_VARIABLE side_4_leader_dead}
              [endlevel]
                  result="victory"
                  bonus=yes
                  {NEW_GOLD_CARRYOVER 80}
              [/endlevel]
           [/then]
           [else]
              [message]
                  speaker="Fairuz"
                  message= _ "Jahin, aren't we suppose to kill that regiment commander first?"
              [/message]
              [message]
                  speaker="Jahin"
                  message= _ "Aye, we must kill that commander first."
              [/message]
           [/else]
        [/if]
    [/event]

    [event]
        name="turn 3,turn 8,turn 13,turn 18,turn 23"
        first_time_only=no

        {GENERIC_UNIT 3 "Naga Fighter" 1 1}
        {GENERIC_UNIT 3 "Naga Fighter" 1 1}
        
        #ifdef EASY
        {GENERIC_UNIT 3 "Naga Hunter" 1 1}
        #else
        {GENERIC_UNIT 3 "Naga Marksman" 1 1}
        #endif

        #ifdef HARD
        {GENERIC_UNIT 3 "Naga Warden" 1 1}
        #else
        {GENERIC_UNIT 3 "Naga Warrior" 1 1}
        #endif

        {GENERIC_UNIT 3 "Nagini Mage" 1 1}

    [/event]

    [event]
        name="turn 2"
        [message]
            speaker="Kojac"
            message= _ "Jahin, beware of Naga reinforcements coming from the northern seas, they might choose to attack you."
        [/message]
        [message]
            speaker="Jahin"
            message= _ "Thank you for the warning. I shall position my troops accordingly."
        [/message]
    [/event]

    [event]
        name="turn 10"
        [unit]
           id="Perkins"
           name= _ "Perkins"
           unrenameable=yes
           type="Northern Fighter"
           {IS_HERO}
           x,y=29,1
           animate=yes
           [modifications]
               {TRAIT_LOYAL}
               {TRAIT_RESILIENT}
           [/modifications]
        [/unit]

        [message]
           speaker="Perkins"
           message= _ "Hail, strangers. I come in search of warriors worth to fight for my mistress, the Princess Afrin, in her battle to reclaim the throne from her vile aunt."
        [/message]
        [message]
           speaker="Jahin"
           message= _ "We would like to help but as you can see, we are a little busy here."
        [/message]
        [message]
           speaker="Perkins"
           message= _ "I understand, and may I join this fight? I am a novice warrior in my homeland."
        [/message]
        [message]
           speaker="Fairuz"
           message= _ "Certainly. The more the merrier!"
        [/message]
    [/event]

    [event]
        name="recruit"
        first_time_only=yes
        [filter]
            race=nightmare
            [or]
               race=aberration
            [/or]
        [/filter]

        [scroll_to_unit]
            x,y="Lich1"
        [/scroll_to_unit]
        {DELAY 1000}

        [message]
            speaker="Fairuz"
            message= _ "<i>(disgusted)</i> What devilry is this? This creature...it's something I have never seen before. What could it be?"
        [/message]
        [message]
            speaker="Jahin"
            message= _ "I don't know what that is and I do not wish to find out. Avoid engaging them and focus on the task at hand."
        [/message]
    [/event]

    {FORCE_CHANCE_TO_HIT (side=1,5,6,7,8,9,14,15) (id="Marshal1") 0 ()}
    {FORCE_CHANCE_TO_HIT (side=1,5,6,7,8,9,14,15) (id="Marshal2") 0 ()}
    {FORCE_CHANCE_TO_HIT (side=1,5,6,7,8,9,14,15) (id="Marshal3") 0 ()}
    {FORCE_CHANCE_TO_HIT (side=1,5,6,7,8,9,14,15) (id="Marshal4") 0 ()}
    {FORCE_CHANCE_TO_HIT (side=1,5,6,7,8,9,14,15) (id="Marshal5") 0 ()}

    {FORCE_CHANCE_TO_HIT (side=1,2,3,4,5,6,7,10,11,12,13,16)(id="Lord Devan") 0 ()}
    {FORCE_CHANCE_TO_HIT (side=1,2,3,4,5,6,7,10,11,12,13,16) (id="Demon2") 0 ()}
    {FORCE_CHANCE_TO_HIT (side=1,2,3,4,5,6,7,10,11,12,13,16) (id="Demon3") 0 ()}

    {FORCE_CHANCE_TO_HIT (side=1,2,3,4,5,10,11,12,13,14,15,16) (id="Lich1") 0 ()}
    {FORCE_CHANCE_TO_HIT (side=1,2,3,4,5,10,11,12,13,14,15,16) (id="Lich2") 0 ()}

    #Gold Bonus to sides 8, 9, 14 and 15
    [event]
        name="turn 9"
        first_time_only=yes
        [gold]
            side=8,14,15
            amount=3000
        [/gold]
        [gold]
            side=9
            amount=1000  
        [/gold]

        [message]
            speaker="Lord Devan"
            message= _ "I'm impressed, humans. You have managed to resist the might of only a quarter of my army. But, let's see if you can stand up against the full fury of the Chaos Empire!"
        [/message]
    [/event]

    # The artefact referred here will be revealed in Hero of Irdya...
    # This fact will remain shrouded till then.

    [event]
        name="turn 10"
        first_time_only=yes
        [message]
            speaker="Lich1"
            message= _ "Master Mor-Inal will be displeased with us if we don't capture the artefact before this city is destroyed."
        [/message]
        [message]
            speaker="Lich2"
            message= _ "We better summon more nightmares, undead and monsters then."
        [/message]

        [gold]
            side=6,7
            amount=2000
        [/gold]

        {DELAY 500}

        [message]
            speaker="Jahin"
            message= _ "Master Mor-Inal?"
        [/message]
        [message]
            speaker="Fairuz"
            message= _ "What artefact were those bone-bags referring to?"
        [/message]
        [message]
            speaker="Jahin"
            message= _ "I have an eerie feeling that we shall find out soon enough."
        [/message]
    [/event]

    [event]
        name="turn 16"
        first_time_only=yes
        [message]
            speaker="Lich1"
            message= _ "We must summon more!"
        [/message]

        [gold]
           side=6,7
           amount=2000
        [/gold]
    [/event]

[/scenario]