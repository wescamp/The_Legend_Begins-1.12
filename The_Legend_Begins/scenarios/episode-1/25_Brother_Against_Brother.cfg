#textdomain wesnoth-The_Legend_Begins

[scenario]
   id="25_Brother_Against_Brother"
   name= _ "Brother Against Brother"
   next_scenario="26_The_Great_Siege"

   map_data="{~add-ons/The_Legend_Begins/maps/episode-1/25_Brother_Against_Brother.map}"
   victory_when_enemies_defeated=yes

   # The thing that makes this scenario interesting
   # is that some enemy leaders
   # are required to be slain by
   # Jahin
   # This is made complicated by allowing the AI
   # to take control of side 7, 9, and 10.

   {SADIA_CUSTOM_ADVANCEMENT}

   [story]
      [part]
         music="elvish-theme.ogg"
         story= _ "Despite the Academy not helping them, the allies prepared their armies for the battle that Jahin had long been waiting for - <i>The Clash for Genesis.</i>"
      [/part]
      [part]
        story= _ "The long march began and by the dawn of the fourteenth day, the army stood before the city's outer defenses..."
      [/part]
   [/story]

   {DEFAULT_SCHEDULE_SECOND_WATCH}
   {DEFAULT_MUSIC_PLAYLIST}
   {MORIN_DEATH_EVENT}

   {~add-ons/The_Legend_Begins/macros/deaths.cfg}
   {~add-ons/The_Legend_Begins/macros/recurring-events.cfg}
   {~add-ons/The_Legend_Begins/macros/custom-advancement.cfg}

# Reduced turns by 4 to adjust with difficulty
   {TURNS 22 20 18}
   {TIME_OVER_DEFEAT}

   [side]
      side=1
      team_name="good"
      user_team_name= _ "Alliance of Light"
      id="Jahin"
      name= _ "Jahin"
      type="Warmaster"
      {FLAG_VARIANT long}
      {GOLD 140 120 100}
      {INCOME 3 2 1}
      controller=human
      canrecruit=yes
   [/side]

   {STARTING_VILLAGES 1 3}

   [side]
      side=2
      team_name="bad"
      user_team_name= _ "Vampires"
      {FLAG_VARIANT loyalist}
      profile="portraits/prince.png"
      id="Prince Armand"
      name= _ "Prince Armand"
      type="Methusalem"
      canrecruit=yes
      village_gold=1
      controller=ai
      {GOLD 450 500 600}
      recruit="Half Blood,Vampire Duelist,Blood Manipulator,Marlgoyle,Gargoyle,Fledgeling,Thin Blood,Malborn,Blood Apprentice,Blood Hulk"

# I want this side to focus on
# attacking side 1, 8, 10, and 11

      [ai]
         {AI_SIMPLE_ALWAYS_ASPECT passive_leader "no"}
         {AI_SIMPLE_ALWAYS_ASPECT grouping "offensive"}
         {AI_SIMPLE_ALWAYS_ASPECT aggression "1.00"}
         {AI_SIMPLE_ALWAYS_ASPECT leader_value "3"}
         {AI_SIMPLE_ALWAYS_ASPECT caution "0.2"}
         {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "no"}
         {ATTACK_DEPTH 5 5 6}
         [avoid]
            x=1-10
            y=1-55
         [/avoid]
         [goal]
            name=target
            [criteria]
                side=9
            [/criteria]
            value=10
         [/goal]
         [goal]
            name=target
            [criteria]
                side=7
            [/criteria]
            value=10
         [/goal]
         [goal]
            name=target
            [criteria]
                side=8
            [/criteria]
            value=20
         [/goal]
         [goal]
            name=target
            [criteria]
                side=10
            [/criteria]
            value=100
         [/goal]
      [/ai]
   [/side]

   {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Marlgoyle" 3}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Gargoyle" 4}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Blood Manipulator" 2}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Vampire Duelist" 4}

   {STARTING_VILLAGES 2 10}

# He avoids attacking Kojac and Krog
# but should be attacking Jahin, Faria and Galec

   [side]
      side=3
      team_name="bad"
      user_team_name= _ "Vampires"
      {FLAG_VARIANT loyalist}
      id="General Raven"
      village_gold=1
      name= _ "General Raven"
      type="Sire"
      canrecruit=yes
      controller=ai
      {GOLD 400 450 500}
      recruit="Half Blood,Vampire Duelist,Blood Manipulator,Marlgoyle,Gargoyle,Fledgeling,Thin Blood,Malborn,Blood Apprentice,Blood Hulk"
      [ai]
         {AI_SIMPLE_ALWAYS_ASPECT passive_leader "no"}
         {AI_SIMPLE_ALWAYS_ASPECT grouping "offensive"}
         {AI_SIMPLE_ALWAYS_ASPECT aggression "1.00"}
         {AI_SIMPLE_ALWAYS_ASPECT leader_value "3"}
         {AI_SIMPLE_ALWAYS_ASPECT caution "0.2"}
         {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "no"}
         {ATTACK_DEPTH 5 5 6}
         [goal]
            name=target
            [criteria]
                side=1
            [/criteria]
            value=80
         [/goal]
         [goal]
            name=target
            [criteria]
                side=7
            [/criteria]
            value=10
         [/goal]
         [goal]
            name=target
            [criteria]
                side=8
            [/criteria]
            value=100
         [/goal]
         [goal]
            name=target
            [criteria]
                side=9
            [/criteria]
            value=10
         [/goal]
      [/ai]
   [/side]

   {LIMIT_CONTEMPORANEOUS_RECRUITS 3 "Marlgoyle" 2}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 3 "Gargoyle" 3}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 3 "Blood Manipulator" 2}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 3 "Vampire Duelist" 4}

# Normal AI, behaves as specified

   [side]
      side=4
      team_name="bad"
      user_team_name= _ "Vampires"
      {FLAG_VARIANT loyalist}
      id="Captain Aleron"
      name= _ "Captain Aleron"
      village_gold=1
      type="Sword Dancer"
      canrecruit=yes
      controller=ai
      {GOLD 400 450 500}
      recruit="Half Blood,Vampire Duelist,Blood Manipulator,Marlgoyle,Gargoyle,Fledgeling,Thin Blood,Malborn,Blood Apprentice,Blood Hulk"
      [ai]
         {AI_SIMPLE_ALWAYS_ASPECT passive_leader "no"}
         {AI_SIMPLE_ALWAYS_ASPECT grouping "offensive"}
         {AI_SIMPLE_ALWAYS_ASPECT aggression "1.00"}
         {AI_SIMPLE_ALWAYS_ASPECT leader_value "3"}
         {AI_SIMPLE_ALWAYS_ASPECT caution "0.2"}
         {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "no"}
         {ATTACK_DEPTH 5 5 6}
         [goal]
            name=target
            [criteria]
                side=1
            [/criteria]
            value=10
         [/goal]
         [goal]
            name=target
            [criteria]
                side=7
            [/criteria]
            value=100
         [/goal]
         [goal]
            name=target
            [criteria]
                side=8
            [/criteria]
            value=10
         [/goal]
         [goal]
            name=target
            [criteria]
                side=9
            [/criteria]
            value=80
         [/goal]
      [/ai]
   [/side]

   {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Marlgoyle" 2}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Gargoyle" 3}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Blood Manipulator" 2}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Vampire Duelist" 4}

# AIs of sides 5 and 6 have
# direct orders to defend Genesis
# so they keep attacking to a minimum

   [side]
      side=5
      team_name="bad"
      user_team_name= _ "Traitors"
      {FLAG_VARIANT loyalist}
      id="Monir"
      name= _ "Monir"
      type="Infantry Commander"
      profile="portraits/monir.png"
      canrecruit=yes
      controller=ai
      {GOLD 300 400 500}
      recruit="Swordsman,Cavalryman,Longbowman,Heavy Infantryman"
      [ai]
         {AI_SIMPLE_ALWAYS_ASPECT passive_leader "no"}
         {AI_SIMPLE_ALWAYS_ASPECT grouping "offensive"}
         {AI_SIMPLE_ALWAYS_ASPECT aggression "1.00"}
         {AI_SIMPLE_ALWAYS_ASPECT leader_value "3"}
         {AI_SIMPLE_ALWAYS_ASPECT caution "0.2"}
         {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "no"}
         {ATTACK_DEPTH 5 5 6}
         [goal]
            name="protect_unit"
            [criteria]
                id="Monir"
            [/criteria]
            value=100
            protect_radius=9
         [/goal]
         [goal]
            name="protect_unit"
            [criteria]
                id="Prince Armand"
            [/criteria]
            value=100
            protect_radius=9
         [/goal]
         [goal]
            name=target
            [criteria]
                side=1
            [/criteria]
            value=100
         [/goal]
         [goal]
            name=target
            [criteria]
                side=7
            [/criteria]
            value=100
         [/goal]
         [goal]
            name=target
            [criteria]
                side=8
            [/criteria]
            value=100
         [/goal]
         [goal]
            name=target
            [criteria]
                side=9
            [/criteria]
            value=100
         [/goal]
      [/ai]
   [/side]

   {LIMIT_CONTEMPORANEOUS_RECRUITS 5 "Swordsman" 8}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 5 "Longbowman" 8}

   [side]
      side=6
      team_name="bad"
      user_team_name= _ "Traitors"
      {FLAG_VARIANT loyalist}
      no_leader=yes
      controller=ai
      {GOLD 300 400 500}
      recruit="Swordsman,Cavalryman,Longbowman,Heavy Infantryman"
      [ai]
         {AI_SIMPLE_ALWAYS_ASPECT passive_leader "no"}
         {AI_SIMPLE_ALWAYS_ASPECT grouping "offensive"}
         {AI_SIMPLE_ALWAYS_ASPECT aggression "1.00"}
         {AI_SIMPLE_ALWAYS_ASPECT leader_value "3"}
         {AI_SIMPLE_ALWAYS_ASPECT caution "0.2"}
         {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "no"}
         {ATTACK_DEPTH 5 5 6}
         [goal]
            name="protect_unit"
            [criteria]
                id="Monir"
            [/criteria]
            value=100
            protect_radius=9
         [/goal]
         [goal]
            name="protect_unit"
            [criteria]
                id="Prince Armand"
            [/criteria]
            value=100
            protect_radius=9
         [/goal]
         [goal]
            name=target
            [criteria]
                side=1
            [/criteria]
            value=100
         [/goal]
         [goal]
            name=target
            [criteria]
                side=7
            [/criteria]
            value=100
         [/goal]
         [goal]
            name=target
            [criteria]
                side=8
            [/criteria]
            value=100
         [/goal]
         [goal]
            name=target
            [criteria]
                side=9
            [/criteria]
            value=100
         [/goal]
      [/ai]
   [/side]

   {LIMIT_CONTEMPORANEOUS_RECRUITS 6 "Swordsman" 8}
   {LIMIT_CONTEMPORANEOUS_RECRUITS 6 "Longbowman" 8}

   [side]
      side=7
      controller=human
      team_name="good"
      color=pink
      user_team_name= _ "Northern Allies"
      {GOLD 400 350 300}
      {FLAG_VARIANT ragged}
      {INCOME 3 2 1}
      profile="portraits/kojac.png"
      recruit="Orcish Warrior,Orcish Grunt,Orcish Shaman,Orcish Archer,Orcish Crossbowman,Orcish Assassin,Wolf Rider,Goblin Cavalry,Young Ogre"
      save_id=Kojac
      unrenameable=yes
      id="Kojac"
      name= _ "Kojac"
      type="Orcish Slurbow"
      [modifications]
         {TRAIT_STRONG}
         {TRAIT_QUICK}
      [/modifications]
      canrecruit=yes
      [ai]
         {AI_SIMPLE_ALWAYS_ASPECT passive_leader "no"}
         {AI_SIMPLE_ALWAYS_ASPECT grouping "defensive"}
         {AI_SIMPLE_ALWAYS_ASPECT aggression "0.50"}
         {AI_SIMPLE_ALWAYS_ASPECT leader_value "3"}
         {AI_SIMPLE_ALWAYS_ASPECT caution "0.60"}
         {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "no"}
         {ATTACK_DEPTH 5 5 6}
      [/ai]
   [/side]

   {STARTING_VILLAGES 7 5}

   [side]
      side=8
      controller=human
      team_name="good"
      color=yellow
      user_team_name= _ "Northern Allies"
      {GOLD 400 350 300}
      {FLAG_VARIANT wood-elvish}
      id="Galec"
      name= _ "Galec"
      unrenameable=yes
      type="Elvish Marshal"
      profile="portraits/galec.png"
      {INCOME 3 2 1}
      recruit="Elvish Fighter,Elvish Archer,Elvish Shaman,Elvish Marksman,Elvish Scout,Elvish Hunter"
      save_id=Galec
      [modifications]
         {TRAIT_STRONG}
         {TRAIT_QUICK}
      [/modifications]
   [/side]

   {STARTING_VILLAGES 8 5}

   [side]
      side=9
      color=cyan
      controller=human
      team_name="good"
      user_team_name= _ "Northern Allies"
      {GOLD 400 350 300}
      {INCOME 3 2 1}
      profile="portraits/krog.png"
      id="Krog"
      {FLAG_VARIANT ragged}
      name= _ "Krog"
      type="Troll Warlord"
      recruit="Troll Whelp,Troll Mystic,Troll Rocklobber,Troll"
      save_id=Krog
      unrenameable=yes
      [modifications]
         {TRAIT_STRONG}
         {TRAIT_FEARLESS}
      [/modifications]
      [ai]
         {AI_SIMPLE_ALWAYS_ASPECT passive_leader "no"}
         {AI_SIMPLE_ALWAYS_ASPECT grouping "defensive"}
         {AI_SIMPLE_ALWAYS_ASPECT aggression "0.50"}
         {AI_SIMPLE_ALWAYS_ASPECT leader_value "3"}
         {AI_SIMPLE_ALWAYS_ASPECT caution "0.60"}
         {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "no"}
         {ATTACK_DEPTH 5 5 6}
      [/ai]
   [/side]

   {STARTING_VILLAGES 9 3}

   [side]
      side=10
      team_name="good"
      color=white
      {FLAG_VARIANT long}
      controller=human
      unrenameable=yes
      user_team_name= _ "Elementals"
      no_leader=yes
      recruit="Wisp,Sylph,Vine Beast,Kobold,Stone Golem,Vine Tiger,Zephyr,Razorbird,Thunderbird"
      {GOLD 300 250 200}
      {INCOME 3 2 1}
      [ai]
         {AI_SIMPLE_ALWAYS_ASPECT passive_leader "no"}
         {AI_SIMPLE_ALWAYS_ASPECT grouping "defensive"}
         {AI_SIMPLE_ALWAYS_ASPECT aggression "0.50"}
         {AI_SIMPLE_ALWAYS_ASPECT leader_value "3"}
         {AI_SIMPLE_ALWAYS_ASPECT caution "0.60"}
         {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "no"}
         {ATTACK_DEPTH 5 5 6}
      [/ai]
   [/side]

   {SET_LABEL 3 31 ( _ "Prison") }
   [item]
       x,y=3,31
       image="units/human-outlaws/thug.png~RC(magenta>red)"
    [/item]
    [item]
       x,y=3,31
       image="items/cage.png"
    [/item]
 
   [side]
      side=11
      {FLAG_VARIANT long}
      team_name="good"
      color=teal
      controller=ai
      user_team_name= _ "Goblins"
      no_leader=yes
      recruit="Wolf Rider,Goblin Cavalry,Goblin Lancer,Goblin Pillager,Goblin Knight,Goblin Impaler,Goblin Spearman,Orcish Grunt,Orcish Archer"
      {GOLD 180 150 100}
      {INCOME 3 2 1}
      [ai]
         {AI_SIMPLE_ALWAYS_ASPECT passive_leader "no"}
         {AI_SIMPLE_ALWAYS_ASPECT grouping "defensive"}
         {AI_SIMPLE_ALWAYS_ASPECT aggression "0.50"}
         {AI_SIMPLE_ALWAYS_ASPECT leader_value "3"}
         {AI_SIMPLE_ALWAYS_ASPECT caution "0.60"}
         {AI_SIMPLE_ALWAYS_ASPECT recruitment_ignore_bad_combat "no"}
         {ATTACK_DEPTH 5 5 6}
      [/ai]
   [/side]

   [side]
      side=12
      team_name="bad"
      user_team_name= _ "Guards of Genesis"
      no_leader=yes
      hidden=yes
   [/side]

   [event]
      name="prestart"

      [disallow_recruit]
         side=1
         type="Wisp,Kobold,Stone Golem,Vine Tiger,Vine Beast"
      [/disallow_recruit]
      [disallow_recruit]
         side=9
         type="Saurian Skirmisher,Saurian Ambusher,Saurian Augur"
      [/disallow_recruit]
      [recall]
         id="Faria"
      [/recall]
      [recall]
         id="Morin"
      [/recall]
      [recall]
         id="Sadia"
      [/recall]
      [recall]
         id="Fairuz"
      [/recall]
      [recall]
         id="Maruful"
      [/recall]
      [recall]
         id="Affan"
      [/recall]

      {MOVE_UNIT (id="Faria") 40 3}

      [modify_unit]
         [filter]
            id="Faria"
         [/filter]
         side=10
         canrecruit=yes
      [/modify_unit]

      [unit]
         side=11
         id="Igor"
         x=17
         y=9
         name="Igor"
         overlays="misc/leader-expendable.png"
         type="Hellwolf Rider"
         canrecruit=yes
      [/unit]

      [unstore_unit]
         variable="stored.mahir"
      [/unstore_unit]

      {MOVE_UNIT (id="Mahir") 19 50}

      [modify_unit]
         [filter]
            id="Mahir"
         [/filter]
         side=6
         canrecruit=yes
      [/modify_unit]

      {CLEAR_VARIABLE stored.mahir}
      {CLEAR_VARIABLE stored_Krog}

      {CLEAR_VARIABLE damage_inflicted,drake_quests,side_2_limited_recruits_length,side_3_limited_recruits_length,turn_number,x1,y1,x2,y2}

# Removing units from Jahin's
# recall list and giving them
# to the allies

# Jahin only has Aragwaith and Drakes
# to aid him

      [store_unit]
         [filter]
            side=1
            race="elemental"
         [/filter]
         kill=yes
         variable="stored_list"
      [/store_unit]

      {FOREACH stored_list i}
            {VARIABLE stored_list[$i].side 10}

            [unstore_unit]
                variable=stored_list[$i]
            [/unstore_unit]
            [recall]
                id=$stored_list[$i].id
            [/recall]
        {NEXT i}

        {CLEAR_VARIABLE stored_list}

      [modify_side]
         side=10
         controller=ai
      [/modify_side]

      [store_unit]
         [filter]
            side=1
            race="elf"
         [/filter]
         kill=yes
         variable="stored_elves"
      [/store_unit]

      {FOREACH stored_elves i}
         {VARIABLE stored_elves[$i].side 8}

         [unstore_unit]
             variable=stored_elves[$i]
         [/unstore_unit]
         [recall]
             id=$stored_elves[$i].id
         [/recall]
      {NEXT i}

      {CLEAR_VARIABLE stored_elves}

      [store_unit]
         [filter]
            side=1
            race="orc"
         [/filter]
         kill=yes
         variable="stored_orcs"
      [/store_unit]

      {FOREACH stored_orcs i}
         {VARIABLE stored_orcs[$i].side 7}

         [unstore_unit]
             variable=stored_orcs[$i]
         [/unstore_unit]
         [recall]
             id=$stored_orcs[$i].id
         [/recall]
      {NEXT i}

      {CLEAR_VARIABLE stored_orcs}

      [store_unit]
         [filter]
            side=1
            race="wolf"
         [/filter]
         kill=yes
         variable="stored_goblins"
      [/store_unit]

      {FOREACH stored_goblins i}
         {VARIABLE stored_goblins[$i].side 7}

         [unstore_unit]
             variable=stored_goblins[$i]
         [/unstore_unit]
         [recall]
             id=$stored_goblins[$i].id
         [/recall]
      {NEXT i}

      {CLEAR_VARIABLE stored_goblins}

      [store_unit]
         [filter]
            side=1
            race="troll"
         [/filter]
         kill=yes
         variable="stored_trolls"
      [/store_unit]

      {FOREACH stored_trolls i}
         {VARIABLE stored_trolls[$i].side 9}

         [unstore_unit]
             variable=stored_trolls[$i]
         [/unstore_unit]
         [recall]
             id=$stored_trolls[$i].id
         [/recall]
      {NEXT i}

      {CLEAR_VARIABLE stored_trolls}

      [store_unit]
         [filter]
            side=1
            race="lizard"
         [/filter]
         kill=yes
         variable="stored_saurians"
      [/store_unit]

      {FOREACH stored_saurians i}
         {VARIABLE stored_saurians[$i].side 9}

         [unstore_unit]
             variable=stored_saurians[$i]
         [/unstore_unit]
         [recall]
             id=$stored_saurians[$i].id
         [/recall]
      {NEXT i}

      {CLEAR_VARIABLE stored_saurians}

      # Prison guards
      {LOYAL_UNIT 12 "Sword Dancer" 5 29}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 6 31}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 3 31}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 7 31}{GUARDIAN}
      {LOYAL_UNIT 12 "Sangel" 7 32}{GUARDIAN}

      # Outer wall guards
      {LOYAL_UNIT 12 "Sword Dancer" 3 40}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 8 45}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 5 38}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 6 43}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 11 47}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 7 35}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 7 36}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 10 33}{GUARDIAN}

      {LOYAL_UNIT 12 "Sword Dancer" 11 31}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 12 28}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 12 26}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 11 24}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 13 22}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 16 20}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 22 19}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 24 17}{GUARDIAN}

      {LOYAL_UNIT 12 "Sword Dancer" 27 16}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 29 15}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 33 15}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 31 15}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 35 17}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 38 17}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 40 18}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 40 19}{GUARDIAN}

      {LOYAL_UNIT 12 "Sword Dancer" 42 21}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 43 22}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 43 25}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 43 29}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 42 31}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 43 35}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 43 40}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 43 54}{GUARDIAN}

      {LOYAL_UNIT 12 "Sword Dancer" 26 53}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 43 44}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 30 52}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 25 54}{GUARDIAN}

      # Secondary Guards
      {LOYAL_UNIT 12 "Sword Dancer" 12 48}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 19 39}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 19 28}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 15 43}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 17 36}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 20 27}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 29 25}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 33 25}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 34 25}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 39 28}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 40 28}{GUARDIAN}

      # Island Guards
      {LOYAL_UNIT 12 "Sire" 21 31}{GUARDIAN}
      {LOYAL_UNIT 12 "Day Hunter" 23 30}{GUARDIAN}
      {LOYAL_UNIT 12 "Sire" 30 28}{GUARDIAN}
      {LOYAL_UNIT 12 "Day Hunter" 33 29}{GUARDIAN}

      # Human Guards
      {LOYAL_UNIT 12 "Halberdier" 41 49}{GUARDIAN}
      {LOYAL_UNIT 12 "Royal Guard" 40 47}{GUARDIAN}
      {LOYAL_UNIT 12 "Master Bowman" 36 49}{GUARDIAN}
      {LOYAL_UNIT 12 "Royal Guard" 23 50}{GUARDIAN}
      {LOYAL_UNIT 12 "Halberdier" 17 48}{GUARDIAN}
      {LOYAL_UNIT 12 "Master Bowman" 17 47}{GUARDIAN}
      {LOYAL_UNIT 12 "Iron Mauler" 18 45}{GUARDIAN}
      {LOYAL_UNIT 12 "Iron Mauler" 19 45}{GUARDIAN}

      # Armand's personal bodyguards
      {LOYAL_UNIT 12 "Terror Hulk" 33 39}{GUARDIAN}
      {LOYAL_UNIT 12 "Terror Hulk" 31 39}{GUARDIAN}
      {LOYAL_UNIT 12 "Terror Hulk" 30 40}{GUARDIAN}
      {LOYAL_UNIT 12 "Terror Hulk" 31 42}{GUARDIAN}
      {LOYAL_UNIT 12 "Terror Hulk" 34 40}{GUARDIAN}
      {LOYAL_UNIT 12 "Terror Hulk" 33 42}{GUARDIAN}

      # City
      {LOYAL_UNIT 12 "Sword Dancer" 24 35}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 29 34}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 34 33}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 37 36}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 24 37}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 39 40}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 39 45}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 35 46}{GUARDIAN}

      {LOYAL_UNIT 12 "Sword Dancer" 24 46}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 28 47}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 26 34}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 31 35}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 35 34}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 38 37}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 25 38}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 39 42}{GUARDIAN}

      {LOYAL_UNIT 12 "Sword Dancer" 38 45}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 33 47}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 25 47}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 30 47}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 28 33}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 32 34}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 37 35}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 38 38}{GUARDIAN}

      {LOYAL_UNIT 12 "Sword Dancer" 24 40}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 39 43}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 36 46}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 23 45}{GUARDIAN}
      {LOYAL_UNIT 12 "Sword Dancer" 27 48}{GUARDIAN}
      {LOYAL_UNIT 12 "Twilight Walker" 31 48}{GUARDIAN}

      {LOYAL_UNIT 12 "Marlgoyle" 26 44}{GUARDIAN}
      {LOYAL_UNIT 12 "Marlgoyle" 27 38}{GUARDIAN}
      {LOYAL_UNIT 12 "Marlgoyle" 33 37}{GUARDIAN}
      {LOYAL_UNIT 12 "Marlgoyle" 36 41}{GUARDIAN}
      {LOYAL_UNIT 12 "Marlgoyle" 32 44}{GUARDIAN}

# Gave these ones patrol routes...

      {LOYAL_UNIT 12 "Horseman" 13 39}
      [+unit]
          [ai]
              loop_formula="{~add-ons/The_Legend_Begins/ai/patrol.fai}"
              [vars]
                 guard_radius=7
                 waypoints=[ loc(13,39) -> loc(4,41), loc(4,41) -> loc(11,44), loc(11,44) -> loc(17,38), loc(17,38) -> loc(13,39) ]
                 next_step="loc(13,39)"
              [/vars]
          [/ai]
      [/unit]

      {LOYAL_UNIT 12 "Archer Knight" 17 25}
      [+unit]
          [ai]
              loop_formula="{~add-ons/The_Legend_Begins/ai/patrol.fai}"
              [vars]
                 guard_radius=7
                 waypoints=[ loc(17,25) -> loc(22,21), loc(22,21) -> loc(25,25), loc(25,25) -> loc(19,21), loc(19,21) -> loc(17,25) ]
                 next_step="loc(17,25)"
              [/vars]
          [/ai]
      [/unit]

      {LOYAL_UNIT 12 "Cavalry" 32 21}
      [+unit]
          [ai]
              loop_formula="{~add-ons/The_Legend_Begins/ai/patrol.fai}"
              [vars]
                 guard_radius=7
                 waypoints=[ loc(32,21) -> loc(39,27), loc(39,27) -> loc(31,31), loc(31,31) -> loc(28,24), loc(28,24) -> loc(32,21) ]
                 next_step="loc(32,21)"
              [/vars]
          [/ai]
      [/unit]

      {LOYAL_UNIT 12 "Dragoon" 43 33}
      [+unit]
          [ai]
              loop_formula="{~add-ons/The_Legend_Begins/ai/patrol.fai}"
              [vars]
                 guard_radius=7
                 waypoints=[ loc(43,33) -> loc(39,41), loc(39,41) -> loc(30,33), loc(30,33) -> loc(41,32), loc(41,32) -> loc(43,33) ]
                 next_step="loc(43,33)"
              [/vars]
          [/ai]
      [/unit]

      {LOYAL_UNIT 12 "Lancer" 44 45}
      [+unit]
          [ai]
              loop_formula="{~add-ons/The_Legend_Begins/ai/patrol.fai}"
              [vars]
                 guard_radius=7
                 waypoints=[ loc(44,45) -> loc(34,51), loc(34,51) -> loc(22,49), loc(22,49) -> loc(34,42), loc(34,42) -> loc(44,45) ]
                 next_step="loc(44,45)"
              [/vars]
          [/ai]
      [/unit]
 
      {LOYAL_UNIT 12 "Cavalryman" 36 50}
      [+unit]
          [ai]
              loop_formula="{~add-ons/The_Legend_Begins/ai/patrol.fai}"
              [vars]
                 guard_radius=7
                 waypoints=[ loc(36,50) -> loc(44,53), loc(44,53) -> loc(41,48), loc(41,48) -> loc(35,47), loc(35,47) -> loc(36,50) ]
                 next_step="loc(36,50)"
              [/vars]
          [/ai]
      [/unit]

      {LOYAL_UNIT 12 "Horseman" 25 53}
      [+unit]
          [ai]
              loop_formula="{~add-ons/The_Legend_Begins/ai/patrol.fai}"
              [vars]
                 guard_radius=7
                 waypoints=[ loc(25,53) -> loc(17,52), loc(17,52) -> loc(19,48), loc(19,48) -> loc(29,47), loc(29,47) -> loc(25,53) ]
                 next_step="loc(25,53)"
              [/vars]
          [/ai]
      [/unit]

      {LOYAL_UNIT 12 "Archer Knight" 14 49}
      [+unit]
          [ai]
              loop_formula="{~add-ons/The_Legend_Begins/ai/patrol.fai}"
              [vars]
                 guard_radius=7
                 waypoints=[ loc(14,49) -> loc(10,42), loc(10,42) -> loc(22,40), loc(22,40) -> loc(22,46), loc(22,46) -> loc(14,49) ]
                 next_step="loc(14,49)"
              [/vars]
          [/ai]
      [/unit]
 
      {LOYAL_UNIT 12 "Cavalry" 10 40}
      [+unit]
          [ai]
              loop_formula="{~add-ons/The_Legend_Begins/ai/patrol.fai}"
              [vars]
                 guard_radius=7
                 waypoints=[ loc(10,40) -> loc(13,33), loc(13,33) -> loc(20,37), loc(20,37) -> loc(16,41), loc(16,41) -> loc(10,40) ]
                 next_step="loc(10,40)"
              [/vars]
          [/ai]
      [/unit]

      [objectives]
         side=1
         [objective]
            description= _ "Move Jahin to the prison (3,31) to free the Rebels."
            condition="win"
         [/objective]
         [objective]
            description= _ "Death of Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of any hero unit."
            condition="lose"
         [/objective]
         {TURNS_RUN_OUT}

         [gold_carryover]
            bonus=yes
            carryover_percentage=20
         [/gold_carryover]        
      [/objectives]
      [objectives]
         side=7
         [objective]
            description= _ "Distract the vampires to allow Jahin to move to the prison."
            condition="win"
         [/objective]
         [objective]
            description= _ "Death of Kojac."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of an allied leader."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of any hero unit."
            condition="lose"
         [/objective]
         {TURNS_RUN_OUT}

         [gold_carryover]
            bonus=yes
            carryover_percentage=20
         [/gold_carryover]
      [/objectives]
      [objectives]
         side=8
         [objective]
            description= _ "Help Faria with the assault."
            condition="win"
         [/objective]
         [objective]
            description= _ "Death of Galec."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of an allied leader."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of any hero unit."
            condition="lose"
         [/objective]
         {TURNS_RUN_OUT}

         [gold_carryover]
            bonus=yes
            carryover_percentage=20
         [/gold_carryover]
      [/objectives]
      [objectives]
         side=9
         [objective]
            description= _ "Clear out the prison and assist Kojac in distracting the vampires."
            condition="win"
         [/objective]
         [objective]
            description= _ "Death of Krog."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of an allied leader."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of any hero unit."
            condition="lose"
         [/objective]
         {TURNS_RUN_OUT}

         [gold_carryover]
            bonus=yes
            carryover_percentage=20
         [/gold_carryover]
      [/objectives]      
   [/event]

   [event]
      name="attacker hits"
      [filter]
         [not]
            id="Jahin"
         [/not]
      [/filter]
      [filter_second]
         id="Mahir"
      [/filter_second]
      [message]
         speaker="Mahir"
         message= _ "Brother, I'm surprised that you send your troops to face me rather than attacking yourself! You are truly a coward! The humans will never accept you as a leader!"
      [/message]
      [endlevel]
         result=defeat
      [/endlevel]
   [/event]

   [event]
      name="attacker hits"
      first_time_only=yes
      [filter]
         id="Jahin"
      [/filter]
      [filter_second]
         id="Mahir"
      [/filter_second]
      [message]
         speaker="Mahir"
         message= _ "I see that you have improved in using your sword, but I am still better!"
      [/message]
   [/event]

   [event]
      name="last breath"
      [filter]
         id="Mahir"
      [/filter]
      [filter_second]
         id="Jahin"
      [/filter_second]
      [message]
         speaker="Jahin"
         message= _ "Just drop your weapon, brother. We have almost freed our city."
      [/message]
      [message]
         speaker="Mahir"
         message= _ "Forgive me, for I have betrayed my fellow countrymen."
      [/message]
      [message]
         speaker="Jahin"
         message= _ "Don't!"
      [/message]
      [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "Before Jahin could stop him, Mahir takes his sword and stabs himself, committing suicide."
      [/message]
      # A moment of silence
      {DELAY 1000}
   [/event]

   [event]
      name=die
      [filter]
         id="Mahir"
      [/filter]
      [filter_second]
         id="Jahin"
      [/filter_second]
      [message]
         speaker="Jahin"
         message= _ "Brother, why did you have to kill yourself? You were not to blame. The vampires manipulated you."
      [/message]
   [/event]

   [event]
      name="last breath"
      [filter]
         id="Mahir"
      [/filter]
      [filter_second]
         [not]
            id="Jahin"
         [/not]
      [/filter_second]
      [message]
         speaker="Jahin"
         message= _ "I needed to prove myself as a warrior to him! All is lost now..."
      [/message]
      [endlevel]
         result=defeat
      [/endlevel]
   [/event]

   [event]
      name="last breath"
      [filter]
         id="Monir"
      [/filter]
      [filter_second]
         [not]
            id="Jahin"
         [/not]
      [/filter_second]
      [message]
         speaker="Monir"
         message= _ "My son, my own flesh and blood, is a coward to face me in battle. He will never be anything!"
      [/message]
      [endlevel]
         result=defeat
      [/endlevel]
   [/event]

   [event]
      name="last breath"
      [filter]
         id="Monir"
      [/filter]
      [filter_second]
         id="Jahin"
      [/filter_second]
      [message]
         speaker="Jahin"
         message= _ "You have killed my brothers and now I shall kill you!"
      [/message]
      [message]
         speaker="Monir"
         message= _ "Son, at least you have proven yourself as a warrior to me and I surrender."
      [/message]

# The beginning of Jahin's corruption.
# To be reveled later in the campaign.

      [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "Overwhelmed with the desire for vengeance, Jahin plunges his sword into his father's chest and watches the blood flow down into the moat."
      [/message]
   [/event]

   [event]
      name="die"
      [filter]
         id="Monir"
      [/filter]
      [filter_second]
         id="Jahin"
      [/filter_second]
      [message]
         speaker="Faria"
         message= _ "That was a bit cold-blooded, wasn't it?"
      [/message]
      [message]
         speaker="Jahin"
         message= _ "He deserved it nonetheless."
      [/message]
   [/event]

   [event]
      name="last breath"
      [filter]
         id="Prince Armand"
      [/filter]
      [message]
         speaker="unit"
         message= _ "This cannot be happening! I am the seventh son of the High Methusalem!"
      [/message]
      [message]
         speaker="Jahin"
         message= _ "Foolish prince, your reign of tyranny over the humans is over!"
      [/message]
   [/event]

   [event]
      name=side 9 turn 1
      [scroll_to_unit]
         id="Krog"
      [/scroll_to_unit]
      [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "The saurians have returned to the North to aid the drakes. Krog may no longer recruit them."
      [/message] 
   [/event]

   [event]
      name=side 8 turn 1
      [scroll_to_unit]
         id="Galec"
      [/scroll_to_unit]
      [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "Reinforced with fresh recruits, Galec can recruit <i>Elvish Hunters</i>."
      [/message] 
   [/event]

   [event]
      name=turn 6
      [gold]
         side=2
         amount=100
      [/gold]
      [gold]
         side=3
         amount=100
      [/gold]
      [gold]
         side=4
         amount=100
      [/gold]
      [gold]
         side=5
         amount=100
      [/gold]
      [gold]
         side=6
         amount=100
      [/gold]
   [/event]
 
   [event]
      name=turn 12
      [gold]
         side=2
         amount=200
      [/gold]
      [gold]
         side=3
         amount=200
      [/gold]
      [gold]
         side=4
         amount=200
      [/gold]
      [gold]
         side=5
         amount=200
      [/gold]
      [gold]
         side=6
         amount=200
      [/gold]
   [/event]

   [event]
      name=turn 18
      [gold]
         side=2
         amount=300
      [/gold]
      [gold]
         side=3
         amount=300
      [/gold]
      [gold]
         side=4
         amount=300
      [/gold]
      [gold]
         side=5
         amount=300
      [/gold]
      [gold]
         side=6
         amount=300
      [/gold]
   [/event]

   [event]
      name=turn 24
      [gold]
         side=2
         amount=350
      [/gold]
      [gold]
         side=3
         amount=350
      [/gold]
      [gold]
         side=4
         amount=350
      [/gold]
      [gold]
         side=5
         amount=350
      [/gold]
      [gold]
         side=6
         amount=350
      [/gold]
   [/event]

   [event]
      name=turn 30
      [gold]
         side=2
         amount=400
      [/gold]
      [gold]
         side=3
         amount=400
      [/gold]
      [gold]
         side=4
         amount=400
      [/gold]
      [gold]
         side=5
         amount=400
      [/gold]
      [gold]
         side=6
         amount=400
      [/gold]
   [/event]

   [event]
      name="moveto"
      first_time_only=yes
      [filter]
         id="Jahin"
         x,y=3,31
      [/filter]
      [remove_item]
         x,y=3,31
      [/remove_item]
      {GENERIC_UNIT 1 "Thug" 3 31}
      {GENERIC_UNIT 1 "Bowman" 3 31}
      [+unit]
         id="Rebel"
      [/unit]
      {GENERIC_UNIT 1 "Troll Whelp" 3 31}
      {GENERIC_UNIT 1 "Poacher" 3 31}
      [allow_recruit]
         side=1
         type="Bladesman,Bowman"
      [/allow_recruit]
      [message]
         speaker="Rebel"
         message= _ "Thank you, Jahin. We should have listened to you when you mentioned running away."
      [/message]
      [message]
         speaker="Jahin"
         message= _ "No harm done, but are you all ready to fight?"
      [/message]
      [message]
         speaker="Rebel"
         message= _ "Aye. We are with you all the way!"
      [/message]
      [modify_turns]
         add=54
      [/modify_turns]
      [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "You may recruit <i>Bowmen</i> and <i>Bladesmen</i>."
      [/message]
      [message]
         speaker="Monir"
         message= _ "So, you have managed to free the prisoners. Now, fight me and prove to me that you are not a worthless excuse for a son!"
      [/message]
      [message]
         speaker="Mahir"
         message= _ "The same goes for me as well. Defeat me and show me how experienced you have become!"
      [/message]
      [message]
         speaker="Jahin"
         message= _ "Alright. Now, I have to find an empty keep to rally my troops."
      [/message]

      [objectives]
         side=1
         silent=no
         [objective]
            description= _ "Defeat all enemy leaders."
            condition="win"
         [/objective]
         [objective]
            description= _ "Jahin must defeat Mahir."
            condition="win"
         [/objective]
         [objective]
            description= _ "Jahin must defeat Monir."
            condition="win"
         [/objective]
         [objective]
            description= _ "Death of Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of any hero unit."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Mahir is attacked by any unit other than Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Mahir is slain by any unit other than Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Monir is slain by any unit other than Jahin."
            condition="lose"
         [/objective]
         {TURNS_RUN_OUT}

         [gold_carryover]
            bonus=yes
            carryover_percentage=20
         [/gold_carryover]        
      [/objectives]

      [objectives]
         side=7
         silent=no
         [objective]
            description= _ "Defeat all enemy leaders."
            condition="win"
         [/objective]
         [objective]
            description= _ "Death of Kojac."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of an non-expendable allied leader."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of any hero unit."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Mahir is attacked by any unit other than Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Mahir is slain by any unit other than Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Monir is slain by any unit other than Jahin."
            condition="lose"
         [/objective]
         {TURNS_RUN_OUT}

         [gold_carryover]
            bonus=yes
            carryover_percentage=20
         [/gold_carryover]
      [/objectives]

      [objectives]
         side=8
         silent=no
         [objective]
            description= _ "Defeat all enemy leaders."
            condition="win"
         [/objective]
         [objective]
            description= _ "Death of Galec."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of an non-expendable allied leader."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of any hero unit."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Mahir is attacked by any unit other than Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Mahir is slain by any unit other than Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Monir is slain by any unit other than Jahin."
            condition="lose"
         [/objective]
         {TURNS_RUN_OUT}

         [gold_carryover]
            bonus=yes
            carryover_percentage=20
         [/gold_carryover]
      [/objectives]

      [objectives]
         side=9
         silent=no
         [objective]
            description= _ "Defeat all enemy leaders."
            condition="win"
         [/objective]
         [objective]
            description= _ "Death of Krog."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of an non-expendable allied leader."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Death of any hero unit."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Mahir is attacked by any unit other than Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Mahir is slain by any unit other than Jahin."
            condition="lose"
         [/objective]
         [objective]
            description= _ "Monir is slain by any unit other than Jahin."
            condition="lose"
         [/objective]
         {TURNS_RUN_OUT}

         [gold_carryover]
            bonus=yes
            carryover_percentage=20
         [/gold_carryover]
      [/objectives]

   [/event]

   [event]
      name=turn 13
      [modify_side]
         side=7
         controller=ai
      [/modify_side]
      [modify_side]
         side=9
         controller=ai
      [/modify_side]
      [message]
         speaker="Kojac"
         message= _ "Jahin, I would like to try some new tactics."
      [/message]
      [message]
         speaker="Krog"
         message= _ "Krog want the same."
      [/message]
      [message]
         speaker="Jahin"
         message= _ "Certainly."
      [/message]
      [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "The AI has taken control over sides 7 and 9."
      [/message]
   [/event]

   [event]
      name=turn 3
      [message]
         speaker="Galec"
         message= _ "Remarkable. The forest has healed itself."
      [/message]
      {DELAY 500}
      [message]
         speaker="Fairuz"
         message= _ "What?"
      [/message]
      [message]
         speaker="Sadia"
         message= _ "Don't you guys know?"
      [/message]
      [message]
         speaker="Jahin"
         message= _ "Know what?"
      [/message]
      [message]
         speaker="Faria"
         message= _ "This was the elves' ancestral home. You see, about a few hundred years ago, the elves waged war among the humans and they were almost winning, but the humans used their magical knowledge to, literally, kill their forest. Without the dense forest to protect them, the orcs launched a massive attack on the elves and forced them to flee."
      [/message]
      [message]
         speaker="Jahin"
         message= _ "So, that's why the elves live under a mountain."
      [/message]
      [message]
         speaker="Kojac"
         message= _ "I feel sad knowing that my people prefer attacking weaker foes. But, lets continue this conversation for another time. The enemy is already gathering their troops."
      [/message]
   [/event]

   [event]
      name=start
      [scroll_to_unit]
         id="Prince Armand"
      [/scroll_to_unit]
      {DELAY 900}
      [message]
         speaker="Jahin"
         message= _ "What have they done to the city?! It's a massive fortress!"
      [/message]
      [message]
         speaker="Maruful"
         message= _ "Looks like the vampires have been busy these past few years."
      [/message]
      {SCROLL_TO 3 31}
      {DELAY 900}
      [message]
         speaker="Jahin"
         message= _ "I never noticed that mountain chamber before. What is it?"
      [/message]
      [message]
         speaker="Kojac"
         message= _ "It's similar to orcish holding pens."
      [/message]
      [message]
         speaker="Fairuz"
         message= _ "Looks like the vampires have kept most of the population there. Let's free them."
      [/message]
      [message]
         speaker="Jahin"
         message= _ "I will do that, while you guys keep the enemy busy."
      [/message]
      [message]
         speaker="Faria"
         message= _ "Okay. Just be careful."
      [/message]
      [scroll_to_unit]
         id="Igor"
      [/scroll_to_unit]
      {DELAY 500}
      [message]
         speaker="Affan"
         message= _ "Hey, wait, isn't that Igor?"
      [/message]
      [message]
         speaker="Igor"
         message= _ "Jahin, allow my goblins to ride into battle with you. The vampires have troubled us enough!"
      [/message]
      [message]
         speaker="Jahin"
         message= _ "Certainly, Chief Igor. We need all the help we can get."
      [/message]
      [message]
         speaker="Kojac"
         message= _ "Hey, goblin. You look like a capable leader. Take some of my recruits."
      [/message]
      [message]
         speaker="Igor"
         message= _ "Thank you, orc."
      [/message]
      [message]
         speaker="Kojac"
         message= _ "That's the High Chief to you."
      [/message]
      [message]
         speaker="Igor"
         message= _ "As you command, lord."
      [/message]
      [scroll_to_unit]
         id="Jahin"
      [/scroll_to_unit]
      {DELAY 100}
      [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "All of Jahin's recallable elemental, elven, orcish, saurian, and troll units have been transferred to Faria's, Galec's, Kojac's and Krog's respective sides. In addition to this, Jahin may no longer recruit Elementals units and has to improvise with the units he currently has in his recall list."
      [/message]
   [/event]

   [event]
      name="turn 2"
      [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "As dawn approached, the allies were met with a grim sight."
      [/message]
      [scroll_to_unit]
         id="Mahir"
      [/scroll_to_unit]
      [delay]
         time=900
      [/delay]
      [scroll_to_unit]
         id="Monir"
      [/scroll_to_unit]
      [delay]
         time=900
      [/delay]
      [message]
         speaker="Fairuz"
         message= _ "I don't believe what I'm seeing - human guards stationed alongside vampires!"
      [/message]
      [message]
         speaker="Maruful"
         message= _ "What?!"
      [/message]
      [message]
         speaker="Affan"
         message= _ "Why would the vampires have humans fighting alongside them?"
      [/message]
      [message]
         speaker="Jahin"
         message= _ "I believe we will be finding that out soon enough."
      [/message]
      [message]
         speaker="Mahir"
         message= _ "Hello, brother."
      [/message]
      {DELAY 500}
      [message]
         speaker="Faria"
         message= _ "No, it can't be..."
      [/message]
      [message]
         speaker="Jahin"
         message= _ "Mahir! Brother! How could you?!"
      [/message]
      [message]
         speaker="Mahir"
         message= _ "It was simple. Following you would be the death of all of us and I value my life more, so I decided to return and tell the vampires everything. The vampires, being intrigued, offered me a rank among them and to lead my fellow humans who accepted to fight in the New Genesis Army."
      [/message]
      [message]
         speaker="Kojac"
         message= _ "Miserable runt! You betrayed us!"
      [/message]
      [message]
         speaker="Prince Armand"
         message= _ "Your friend was generous enough to tell us what you intended to do. So, we have our most deadliest soldiers stationed here. More will be coming. Now, Monir, be so kind as to silence your son."
      [/message]
      [message]
         speaker="Monir"
         message= _ "As you command, my prince. He shall join his brothers in the realm of the dead."
      [/message]
      [message]
         speaker="Jahin"
         message= _ "My brothers?! Realm of the dead?! What did you do to them?!"
      [/message]
      [message]
         speaker="Monir"
         message= _ "The vampires offered me the rank of a captain in exchange for the lives of your brothers."
      [/message]
      [message]
         speaker="Jahin"
         message= _ "No, you didn't..."
      [/message]
      [message]
         speaker="Monir"
         message= _ "Yes, I killed them. I did not like it, but I had to carry out the deed. Surely you understand..."
      [/message]
      [message]
         speaker="Mahir"
         message= _ "Brother, it's over. Your cause was a doomed one from the start. Surrender and join us."
      [/message]
      [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "A cyclone of thoughts entered Jahin's mind. Fighting his fellow countrymen? This never even occurred to him before. What would he do? Flee, like he did last time or would he stay and help his friends and allies fight? He stood there motionless, thinking."
     [/message]
     {DELAY 1000}
     [message]
        speaker="Jahin"
        message= _ "No, I can't..."
     [/message]
     {DELAY 500}
     [message]
        speaker="Faria"
        message= _ "Jahin, don't fall prey to their words! I believe in you! You can conquer this!"
     [/message]
     {DELAY 500}
     [message]
        speaker="Galec"
        message= _ "Jahin, don't listen to them! They are manipulating you! All they are saying are lies. Your brothers might be in the prison!"
     [/message]
     {DELAY 500}
     [message]
        speaker="Kojac"
        message= _ "And Mahir and your father might be bewitched into fighting for the vampires!"
     [/message]
     {DELAY 500}
     [message]
        speaker="Krog"
        message= _ "Jahin don't flee!"
     [/message]
     {DELAY 500}
     [message]
        speaker="Jahin"
        message= _ "I can't flee! Genesis shall be freed, even if we have to fight our own kind!"
     [/message]
     [message]
        speaker="Affan"
        message= _ "That's the spirit, mate! We're with you all the way!"
     [/message]
     [message]
        speaker="Fairuz"
        message= _ "Death to the traitors!"
     [/message]
     [message]
        speaker="Maruful"
        message= _ "No, death to the vampires!"
     [/message]
     [message]
        speaker="Prince Armand"
        message= _ "Pitiful idiots! Minions, destroy them!"
     [/message]
  [/event]

  [event]
     name="enemies defeated"
     [modify_unit]
        [filter]
           id="Faria"
        [/filter]
        canrecruit=no
        side=1
     [/modify_unit]
     [message]
        speaker="Fairuz"
        message= _ "Victory! We are finally free!"
     [/message]
     [message]
         speaker="narrator"
         image="wesnoth-icon.png"
         message= _ "Screams of triumph are heard from the allied troops."
     [/message]

     {DELAY 1000}
     {GENERIC_UNIT 7 "Goblin Knight" 1 4}
     [+unit]
        id="Messenger"
        animate=yes
     [/unit]
     [message]
        speaker="Messenger"
        message= _ "<i>(panting)</i> Chief!"
     [/message]
     [message]
        speaker="Kojac"
        message= _ "What?"
     [/message]
     [message]
        speaker="Messenger"
        message= _ "<i>(panting)</i> Cavan under attack..Need help.. Desperately.."
     [/message]
     [kill]
        id="Messenger"
        animate=yes
     [/kill]
     [message]
        speaker="Kojac"
        message= _ "This is dire indeed. Jahin, I must return to Cavan at once. My people need me."
     [/message]
     [message]
        speaker="Jahin"
        message= _ "I understand. Please hurry, you mustn't keep them waiting."
     [/message]
     [kill]
       side=7
       animate=no
       fire_event=no
     [/kill]
     [if]
        [have_unit]
           [filter]
              id="Igor"
           [/filter]
        [/have_unit]
        [then]
           [message]
              speaker="Igor"
              message= _ "I'm coming as well. My wolf riders will enjoy the mountainous landscape."
           [/message]
           [kill]
              side=11
              animate=no
           [/kill]
        [/then]
     [/if]

     {DELAY 500}

     {GENERIC_UNIT 9 "Troll" 1 19}
     [+unit]
        id="Troll2"
     [/unit]

     [message]
        speaker="Troll2"
        message= _ "Krog come quick! Trolls under attack!"
     [/message]

     [message]
        speaker="Krog"
        message= _ "Krog must go now."
     [/message]
     [message]
        speaker="Jahin"
        message= _ "Farewell Krog. May we meet again in happier times."
     [/message]
     [kill]
        side=9
        animate=no
        fire_event=no
     [/kill]

     {DELAY 500}

     [message]
        speaker="Galec"
        message= _ "We have conquered Genesis. Now, what shall we do next?"
     [/message]
     [message]
        speaker="Fairuz"
        message= _ "We celebrate!"
     [/message]

     [endlevel]
        result=victory
        {NEW_GOLD_CARRYOVER 20}
        bonus=yes
     [/endlevel]
   [/event]

   [event]
      name=turn 10
      [if]
         [variable]
            name="aragwaith_delayed"
            equals=1
         [/variable]
         [then]
         [/then]
         [else]
            {LOYAL_UNIT 11 "Aragwaith Eagle Master" 44 1}
            [+unit]
               id="Squadron Commander"
            [/unit]
            {LOYAL_UNIT 11 "Aragwaith Eagle Master" 44 1}
            {LOYAL_UNIT 11 "Aragwaith Eagle Rider" 44 1}
            {LOYAL_UNIT 11 "Aragwaith Eagle Rider" 44 1}
            [message]
               speaker="Squadron Commander"
               message= _ "Aragwaithi Eagle Riders reporting for duty."
            [/message]
            [message]
               speaker="Jahin"
               message= _ "Look, Lord Warren has sent us reinforcements."
            [/message]
            [message]
               speaker="Squadron Commander"
               message= _ "That is not all, Jahin. Our main army has began the attacks on the vampires' frontier defenses. Genesis won't receive any heavy reinforcements for the following month or so."
            [/message]
            [message]
               speaker="Faria"
               message= _ "Splendid. Now, we can unleash our full fury upon the vampires!"
            [/message]
         [/else]
      [/if]

      {CLEAR_VARIABLE aragwaith_delayed}
   [/event]

   [event]
      name=die
      [filter]
         id="Igor"
      [/filter]
      [message]
         speaker="Maruful"
         message= _ "He died fighting, a true warrior's death indeed."
      [/message]
   [/event]

[/scenario]